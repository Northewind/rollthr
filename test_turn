#! /usr/bin/octave -qf
format long g
disp("");

	##   d2     средний диаметр, мм
	##   d      номинальное значение наружнго диаметра резьбы, мм
	##   P      номинальное значение шага резьбы, мм
	##   Ph     номинальное значение хода резьбы, мм
	##   ang    угол профиля резьбы, град
	##   dalp   отклонение угла профиля, мин
	##   ddpref отклонения диаметров проволочек (3-вектор), мкм
	##   C5     поправка, учитывающая измерительное усилие 2Н, мкм



disp("5\"-3 ACME-2 STARTS-3G-LEFT\n");
d2 = 122.81 + [-0.02 0.02];
d = 5*25.4; 
P = 25.4/3;
Ph = P*2;
ang = 29;
dalp = 0;
ddpref = [0 0 0];
C5 = 0.4;
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("PlugGo M:     %.3f\n", M);
printf("PlugGo M tol: %.3f\n\n", M(2) - M(1));

d2 = 123.33 + [-0.02 0.02];
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("PlugNG M:     %.3f\n", M);
printf("PlugNG M tol: %.3f\n\n", M(2) - M(1));


disp("\n===============\n");


disp("Tr130x24(P12)-7e\n");
d2 = 124.066 + [-0.04 0];
d = 130;
P = 12;
Ph = 24;
ang = 30;
dalp = 0;
ddpref = [0 0 0];
C5 = 0.4;
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("PlugGo M:     %.3f\n", M);
printf("PlugGo M tol: %.3f\n\n", M(2) - M(1));
#d2 = roll3(M, d, P, Ph, ang, dalp, ddpref, C5)   #correctness check

d2 = 124.71 + [-0.04 0];
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("PlugNG M:     %.3f\n", M);
printf("PlugNG M tol: %.3f\n\n", M(2) - M(1));
#d2 = roll3(M, d, P, Ph, ang, dalp, ddpref, C5)   #correctness check

d2 = 123.881 + [-0.032 0];
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("CPlugGo M:     %.3f\n", M);
printf("CPlugGo M tol: %.3f\n\n", M(2) - M(1));
#d2 = roll3(M, d, P, Ph, ang, dalp, ddpref, C5)   #correctness check

d2 = 123.369 + [-0.032 0];
[M C] = turnsize3(d2, d, P, Ph, ang, dalp, ddpref, C5);
printf("CPlugNG M:     %.3f\n", M);
printf("CPlugNG M tol: %.3f\n\n", M(2) - M(1));
#d2 = roll3(M, d, P, Ph, ang, dalp, ddpref, C5)   #correctness check

