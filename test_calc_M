#! /usr/bin/octave -qf
format long g
disp("");

	## Использование:
	##
	##   [M C] = turnsize3(d2, d, P, Ph, alp, dalp=0, droll=NA, ddroll=[0 0 0], C5=0)
	##
	##   M      Настроечный размер, мм
	##   C      Суммарная поправка (М = Мcalc - C), мм
	##
	## Входные параметры:
	##
	##   d2     2-вектор предельный значений среднего диаметра, мм
	##   d      номинальное значение наружного диаметра резьбы, мм
	##   P      номинальное значение шага резьбы, мм
	##   Ph     номинальное значение хода резьбы, мм
	##   alp    угол профиля резьбы, град
	##
	## Необязательные параметры:
	##
	##   dalp   отклонение угла профиля, мин
	##   droll  номинальный диаметр проволочек
	##          (по умолчанию используется предпочтительный), мм
	##   ddroll отклонения диаметров проволочек (3-вектор) от номинала, мкм
	##   C5     поправка, учитывающая измерительное усилие 2Н, мкм

disp("Plug gage for 3.75\"-5 ACME-2 STARTS-3G-LEFT\n");
d2 = 92.745 + [-0.0165 0.0165];
d = 95.285;
P = 25.4/5;
Ph = P*2;
alp = 29;
dalp = 0;
droll = 2.588;
ddroll = [0 0 0];
C5 = 0.4;

[M C] = turnsize3(d2, d, P, Ph, alp, dalp, droll, ddroll, C5);
printf("Plug GO M:     %.3f\n", M);

d2 = 93.046 + [-0.0165 0.0165];
#d = 94;
[M C] = turnsize3(d2, d, P, Ph, alp, dalp, droll, ddroll, C5);
printf("Plug NOGO M:     %.3f\n", M);



disp("\n===============\n");



disp("Plug gage for 5\"-3 ACME-2 STARTS-3G-LEFT\n");
d2 = 122.81 + [-0.02 0.02];
d2 = [122.767 122.8]; #Tulamash
d = 127.046;
d = mean([127.255 127.306]); #Tulamash
P = 25.4/3;
Ph = P*2;
alp = 29;
dalp = 0;
droll = 5.176;
ddroll = [0 0 0];
C5 = 0.4;

[M C] = turnsize3(d2, d, P, Ph, alp, dalp, droll, ddroll, C5);
printf("Plug GO M:     %.3f\n", M);

d2 = 123.33 + [-0.02 0.02];
d2 = [123.098 123.131]; #Tulamash
#d = 125.025;
d = mean([124.832 124.883]); #Tulamash
droll = 4.141;
[M C] = turnsize3(d2, d, P, Ph, alp, dalp, droll, ddroll, C5);
printf("Plug NOGO M:     %.3f\n", M);



disp("\n===============\n");

